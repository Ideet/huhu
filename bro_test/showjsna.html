<!DOCTYPE html>
<html>
<head>
    <title>JavaScriptå¯¹è±¡å±‚çº§æ¢æµ‹å™¨</title>
    <style>
        #object-explorer {
            position: fixed;
            top: 10px;
            left: 10px;
            width: calc(100% - 40px);
            height: calc(100vh - 40px);
            overflow: auto;
            background: #1e1e1e;
            border: 1px solid #333;
            padding: 20px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 14px;
            line-height: 1.6;
            z-index: 9999;
            color: #d4d4d4;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.5);
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #007acc;
        }
        
        .title {
            font-size: 18px;
            font-weight: bold;
            color: #4ec9b0;
        }
        
        .stats {
            font-size: 14px;
            color: #9cdcfe;
        }
        
        .controls {
            margin-bottom: 15px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .control-btn {
            background: #0e639c;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: background 0.3s;
        }
        
        .control-btn:hover {
            background: #1177bb;
        }
        
        .search-box {
            flex-grow: 1;
            min-width: 200px;
            padding: 8px;
            background: #252525;
            border: 1px solid #3e3e3e;
            color: white;
            border-radius: 4px;
        }
        
        /* æ ‘å½¢ç»“æ„æ ·å¼ */
        .tree {
            margin-left: 0;
            list-style: none;
            padding-left: 0;
        }
        
        .tree-item {
            margin: 3px 0;
        }
        
        .tree-node {
            padding: 5px 10px;
            cursor: pointer;
            border-radius: 4px;
            display: flex;
            align-items: center;
            transition: background 0.2s;
        }
        
        .tree-node:hover {
            background: #2d2d2d;
        }
        
        .tree-node.expanded {
            background: #2a2d2e;
        }
        
        .toggle {
            width: 16px;
            height: 16px;
            margin-right: 5px;
            text-align: center;
            line-height: 14px;
            font-size: 12px;
            color: #569cd6;
            cursor: pointer;
            user-select: none;
        }
        
        .node-icon {
            margin-right: 8px;
            font-size: 14px;
        }
        
        .node-name {
            color: #dcdcaa;
            font-weight: bold;
            margin-right: 10px;
        }
        
        .node-type {
            color: #4ec9b0;
            font-size: 11px;
            background: #1a1a1a;
            padding: 2px 6px;
            border-radius: 3px;
            margin-right: 8px;
        }
        
        .node-value {
            color: #ce9178;
            font-size: 12px;
            max-width: 400px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .node-path {
            color: #888;
            font-size: 11px;
            margin-left: 10px;
            font-style: italic;
        }
        
        .children {
            margin-left: 25px;
            border-left: 1px dashed #3e3e3e;
            padding-left: 15px;
            display: none;
        }
        
        .expanded > .children {
            display: block;
        }
        
        /* ä¸åŒç±»å‹çš„å›¾æ ‡å’Œé¢œè‰² */
        .icon-function { color: #4ec9b0; }
        .icon-object { color: #569cd6; }
        .icon-string { color: #ce9178; }
        .icon-number { color: #b5cea8; }
        .icon-boolean { color: #d7ba7d; }
        .icon-undefined { color: #888; }
        .icon-symbol { color: #c586c0; }
        
        /* å·¥å…·æç¤º */
        .tooltip {
            position: absolute;
            background: #2d2d30;
            border: 1px solid #3e3e3e;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 12px;
            max-width: 400px;
            word-wrap: break-word;
            z-index: 10000;
            display: none;
        }
        
        .close-btn, .copy-btn {
            background: #2d2d30;
            color: #cccccc;
            border: 1px solid #3e3e3e;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            margin-left: 5px;
        }
        
        .close-btn:hover, .copy-btn:hover {
            background: #3e3e3e;
        }
    </style>
</head>
<body style="background: #0e0e0e; margin: 0; padding: 0;">
    <div id="object-explorer">
        <div class="header">
            <div class="title">ğŸŒ JavaScriptå¯¹è±¡å±‚çº§æ¢æµ‹å™¨</div>
            <div class="stats">
                <span id="total-count">åŠ è½½ä¸­...</span>
            </div>
            <button class="close-btn" onclick="toggleExplorer()">éšè—é¢æ¿</button>
            <button class="copy-btn" onclick="exportTree()">å¯¼å‡ºæ ‘ç»“æ„</button>
        </div>
        
        <div class="controls">
            <input type="text" id="searchInput" class="search-box" placeholder="æœç´¢å¯¹è±¡ã€å±æ€§æˆ–æ–¹æ³•..." 
                   onkeyup="searchTree()">
            <button class="control-btn" onclick="expandAll()">å±•å¼€å…¨éƒ¨</button>
            <button class="control-btn" onclick="collapseAll()">æŠ˜å å…¨éƒ¨</button>
            <button class="control-btn" onclick="showGlobalOnly()">ä»…æ˜¾ç¤ºå…¨å±€å¯¹è±¡</button>
            <button class="control-btn" onclick="showFunctionsOnly()">ä»…æ˜¾ç¤ºæ–¹æ³•</button>
            <button class="control-btn" onclick="refresh()">åˆ·æ–°</button>
        </div>
        
        <div id="tree-container">
            <!-- æ ‘å½¢ç»“æ„å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
        </div>
        
        <div id="tooltip" class="tooltip"></div>
    </div>

<script>
// ========================= é…ç½®é€‰é¡¹ =========================
const CONFIG = {
    maxDepth: 4,                // æœ€å¤§é€’å½’æ·±åº¦
    maxChildren: 50,            // æ¯ä¸ªèŠ‚ç‚¹æœ€å¤šæ˜¾ç¤ºçš„å­èŠ‚ç‚¹æ•°
    showPrototypeChain: true,   // æ˜¯å¦æ˜¾ç¤ºåŸå‹é“¾
    showPrivateProperties: false, // æ˜¯å¦æ˜¾ç¤ºç§æœ‰å±æ€§
    autoExpandGlobal: true,     // æ˜¯å¦è‡ªåŠ¨å±•å¼€å…¨å±€å¯¹è±¡
    valuePreviewLength: 80      // å€¼é¢„è§ˆé•¿åº¦
};

// ========================= ä¸»è¦å¯¹è±¡æ ‘ =========================
const ROOT_OBJECTS = [
    { name: 'window', obj: window, description: 'å…¨å±€çª—å£å¯¹è±¡' },
    { name: 'document', obj: document, description: 'æ–‡æ¡£å¯¹è±¡' },
    { name: 'navigator', obj: navigator, description: 'æµè§ˆå™¨ä¿¡æ¯å¯¹è±¡' },
    { name: 'location', obj: location, description: 'URLä½ç½®å¯¹è±¡' },
    { name: 'history', obj: history, description: 'å†å²è®°å½•å¯¹è±¡' },
    { name: 'console', obj: console, description: 'æ§åˆ¶å°å¯¹è±¡' },
    { name: 'Math', obj: Math, description: 'æ•°å­¦å¯¹è±¡' },
    { name: 'JSON', obj: JSON, description: 'JSONå¯¹è±¡' },
    { name: 'Date', obj: Date, description: 'æ—¥æœŸæ„é€ å‡½æ•°' },
    { name: 'Array', obj: Array, description: 'æ•°ç»„æ„é€ å‡½æ•°' },
    { name: 'Object', obj: Object, description: 'å¯¹è±¡æ„é€ å‡½æ•°' },
    { name: 'Function', obj: Function, description: 'å‡½æ•°æ„é€ å‡½æ•°' },
    { name: 'String', obj: String, description: 'å­—ç¬¦ä¸²æ„é€ å‡½æ•°' },
    { name: 'Number', obj: Number, description: 'æ•°å­—æ„é€ å‡½æ•°' },
    { name: 'Boolean', obj: Boolean, description: 'å¸ƒå°”æ„é€ å‡½æ•°' },
    { name: 'RegExp', obj: RegExp, description: 'æ­£åˆ™è¡¨è¾¾å¼æ„é€ å‡½æ•°' },
    { name: 'Error', obj: Error, description: 'é”™è¯¯æ„é€ å‡½æ•°' },
    { name: 'Promise', obj: Promise, description: 'Promiseæ„é€ å‡½æ•°' },
    { name: 'localStorage', obj: localStorage, description: 'æœ¬åœ°å­˜å‚¨' },
    { name: 'sessionStorage', obj: sessionStorage, description: 'ä¼šè¯å­˜å‚¨' },
    { name: 'crypto', obj: crypto, description: 'åŠ å¯†å¯¹è±¡' },
    { name: 'performance', obj: performance, description: 'æ€§èƒ½å¯¹è±¡' }
];

// ========================= å·¥å…·å‡½æ•° =========================
function getType(obj) {
    if (obj === null) return 'null';
    if (obj === undefined) return 'undefined';
    
    const type = typeof obj;
    if (type !== 'object') return type;
    
    if (Array.isArray(obj)) return 'array';
    if (obj instanceof Date) return 'date';
    if (obj instanceof RegExp) return 'regexp';
    if (obj instanceof Promise) return 'promise';
    if (obj instanceof Function) return 'function';
    
    const constructorName = obj.constructor?.name;
    if (constructorName && constructorName !== 'Object') {
        return constructorName.toLowerCase();
    }
    
    return 'object';
}

function getIcon(type) {
    const icons = {
        'function': 'Æ’',
        'object': '{}',
        'array': '[]',
        'string': '"',
        'number': '#',
        'boolean': 'âœ“',
        'undefined': '?',
        'null': 'âˆ…',
        'symbol': 'âš›',
        'date': 'ğŸ“…',
        'regexp': '/',
        'promise': 'â³',
        'window': 'ğŸªŸ',
        'document': 'ğŸ“„',
        'navigator': 'ğŸŒ',
        'math': 'ğŸ§®',
        'json': '{}',
        'error': 'âš '
    };
    return icons[type] || 'â€¢';
}

function getTypeColor(type) {
    const colors = {
        'function': '#4ec9b0',
        'object': '#569cd6',
        'array': '#d7ba7d',
        'string': '#ce9178',
        'number': '#b5cea8',
        'boolean': '#d7ba7d',
        'undefined': '#888',
        'null': '#888',
        'symbol': '#c586c0',
        'date': '#9cdcfe',
        'regexp': '#d16969',
        'promise': '#dcdcaa',
        'window': '#4ec9b0',
        'document': '#4ec9b0',
        'default': '#cccccc'
    };
    return colors[type] || colors.default;
}

function formatValue(value, type) {
    if (value === null) return 'null';
    if (value === undefined) return 'undefined';
    
    try {
        if (type === 'function') {
            const funcStr = value.toString();
            const match = funcStr.match(/^(?:async\s+)?(?:function\s*\*?\s*)?(\w*)/);
            const name = match && match[1] ? match[1] : 'anonymous';
            return `${name}()`;
        }
        
        if (type === 'string') {
            return `"${value.length > CONFIG.valuePreviewLength 
                ? value.substring(0, CONFIG.valuePreviewLength) + '...' 
                : value}"`;
        }
        
        if (type === 'number' || type === 'boolean') {
            return String(value);
        }
        
        if (type === 'array') {
            return `Array[${value.length}]`;
        }
        
        if (type === 'date') {
            return value.toISOString();
        }
        
        if (type === 'regexp') {
            return value.toString();
        }
        
        if (type === 'object') {
            const keys = Object.keys(value);
            return `Object {${keys.length} properties}`;
        }
        
        return String(value).substring(0, CONFIG.valuePreviewLength);
    } catch (error) {
        return '[æ— æ³•è®¿é—®]';
    }
}

function getChildren(obj, parentPath = '') {
    const children = [];
    
    if (!obj || typeof obj !== 'object' || parentPath.split('.').length >= CONFIG.maxDepth) {
        return children;
    }
    
    const seen = new Set();
    
    try {
        // è·å–è‡ªæœ‰å±æ€§
        Object.getOwnPropertyNames(obj).forEach(key => {
            if (!CONFIG.showPrivateProperties && key.startsWith('_')) return;
            if (seen.has(key)) return;
            
            seen.add(key);
            
            try {
                const value = obj[key];
                const type = getType(value);
                const path = parentPath ? `${parentPath}.${key}` : key;
                
                children.push({
                    name: key,
                    value: value,
                    type: type,
                    enumerable: true,
                    path: path,
                    isOwnProperty: true
                });
            } catch (error) {
                // å¿½ç•¥æ— æ³•è®¿é—®çš„å±æ€§
            }
        });
        
        // è·å–åŸå‹é“¾ä¸Šçš„å±æ€§
        if (CONFIG.showPrototypeChain) {
            let proto = Object.getPrototypeOf(obj);
            while (proto && proto !== Object.prototype) {
                Object.getOwnPropertyNames(proto).forEach(key => {
                    if (!CONFIG.showPrivateProperties && key.startsWith('_')) return;
                    if (seen.has(key) || key === 'constructor') return;
                    
                    seen.add(key);
                    
                    try {
                        const value = obj[key];
                        const type = getType(value);
                        const path = parentPath ? `${parentPath}.${key}` : key;
                        
                        children.push({
                            name: key,
                            value: value,
                            type: type,
                            enumerable: false,
                            path: path,
                            isOwnProperty: false,
                            inherited: true
                        });
                    } catch (error) {
                        // å¿½ç•¥æ— æ³•è®¿é—®çš„å±æ€§
                    }
                });
                proto = Object.getPrototypeOf(proto);
            }
        }
    } catch (error) {
        console.error('è·å–å­å±æ€§æ—¶å‡ºé”™:', error);
    }
    
    // æŒ‰åç§°æ’åº
    return children.sort((a, b) => a.name.localeCompare(b.name)).slice(0, CONFIG.maxChildren);
}

// ========================= æ ‘å½¢ç»“æ„æ¸²æŸ“ =========================
function createTreeNode(node, level = 0) {
    const hasChildren = node.value && typeof node.value === 'object' && 
                       node.type !== 'null' && node.type !== 'undefined' &&
                       !(node.type === 'function' && !node.value.prototype);
    
    const isExpanded = level === 0 && CONFIG.autoExpandGlobal;
    const icon = getIcon(node.type);
    const typeColor = getTypeColor(node.type);
    const displayValue = formatValue(node.value, node.type);
    
    const nodeId = `node-${Math.random().toString(36).substr(2, 9)}`;
    
    return `
        <div class="tree-item" data-node-id="${nodeId}" data-path="${node.path}" data-type="${node.type}">
            <div class="tree-node ${isExpanded ? 'expanded' : ''}" 
                 onclick="toggleNode(this, '${node.path}')"
                 onmouseenter="showTooltip(event, '${node.path}')"
                 onmouseleave="hideTooltip()">
                ${hasChildren ? `
                    <span class="toggle">${isExpanded ? 'â–¼' : 'â–¶'}</span>
                ` : `<span class="toggle" style="visibility: hidden;">â€¢</span>`}
                <span class="node-icon" style="color: ${typeColor}">${icon}</span>
                <span class="node-name">${node.name}</span>
                ${node.inherited ? '<span style="color:#888; font-size:10px; margin:0 5px;">(ç»§æ‰¿)</span>' : ''}
                ${!node.enumerable ? '<span style="color:#888; font-size:10px; margin:0 5px;">(ä¸å¯æšä¸¾)</span>' : ''}
                <span class="node-type">${node.type}</span>
                <span class="node-value">${displayValue}</span>
                <span class="node-path">${node.path}</span>
            </div>
            ${hasChildren ? `
                <div class="children" style="${isExpanded ? 'display:block;' : 'display:none;'}">
                    <!-- å­èŠ‚ç‚¹å°†åœ¨è¿™é‡ŒåŠ¨æ€åŠ è½½ -->
                </div>
            ` : ''}
        </div>
    `;
}

function renderTree() {
    const container = document.getElementById('tree-container');
    container.innerHTML = '';
    
    const tree = document.createElement('div');
    tree.className = 'tree';
    
    ROOT_OBJECTS.forEach(rootObj => {
        const node = {
            name: rootObj.name,
            value: rootObj.obj,
            type: getType(rootObj.obj),
            enumerable: true,
            path: rootObj.name,
            isOwnProperty: true,
            description: rootObj.description
        };
        
        tree.innerHTML += createTreeNode(node, 0);
    });
    
    container.appendChild(tree);
    
    // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
    updateStats();
}

function toggleNode(element, path) {
    const treeNode = element.closest('.tree-item');
    const childrenDiv = treeNode.querySelector('.children');
    
    if (!childrenDiv) return;
    
    const isExpanded = element.classList.contains('expanded');
    
    if (isExpanded) {
        // æŠ˜å 
        element.classList.remove('expanded');
        childrenDiv.style.display = 'none';
        element.querySelector('.toggle').textContent = 'â–¶';
    } else {
        // å±•å¼€
        element.classList.add('expanded');
        childrenDiv.style.display = 'block';
        element.querySelector('.toggle').textContent = 'â–¼';
        
        // å¦‚æœå­èŠ‚ç‚¹è¿˜æœªåŠ è½½ï¼Œç°åœ¨åŠ è½½
        if (childrenDiv.children.length === 0) {
            loadChildren(path, childrenDiv);
        }
    }
}

function loadChildren(path, container) {
    const parts = path.split('.');
    let obj = window;
    
    // æ ¹æ®è·¯å¾„æ‰¾åˆ°å¯¹åº”çš„å¯¹è±¡
    for (const part of parts) {
        if (obj && typeof obj === 'object' && part in obj) {
            obj = obj[part];
        } else {
            container.innerHTML = '<div style="color:#888; padding:5px;">[æ— æ³•è®¿é—®]</div>';
            return;
        }
    }
    
    const children = getChildren(obj, path);
    
    if (children.length === 0) {
        container.innerHTML = '<div style="color:#888; padding:5px;">[æ— å±æ€§]</div>';
        return;
    }
    
    container.innerHTML = children.map(child => createTreeNode(child, path.split('.').length)).join('');
}

// ========================= äº¤äº’åŠŸèƒ½ =========================
function searchTree() {
    const searchTerm = document.getElementById('searchInput').value.toLowerCase().trim();
    const allNodes = document.querySelectorAll('.tree-node');
    
    if (!searchTerm) {
        // æ¸…é™¤æ‰€æœ‰é«˜äº®
        allNodes.forEach(node => {
            node.style.background = '';
            const item = node.closest('.tree-item');
            if (item) item.style.display = '';
        });
        return;
    }
    
    allNodes.forEach(node => {
        const item = node.closest('.tree-item');
        const name = node.querySelector('.node-name')?.textContent.toLowerCase() || '';
        const type = node.querySelector('.node-type')?.textContent.toLowerCase() || '';
        const path = node.querySelector('.node-path')?.textContent.toLowerCase() || '';
        
        const matches = name.includes(searchTerm) || 
                       type.includes(searchTerm) || 
                       path.includes(searchTerm);
        
        if (item) {
            item.style.display = matches ? '' : 'none';
            if (matches) {
                node.style.background = '#3a3d41';
                
                // ç¡®ä¿çˆ¶èŠ‚ç‚¹éƒ½å±•å¼€
                let parent = item.parentElement;
                while (parent && !parent.classList.contains('tree')) {
                    if (parent.classList.contains('children')) {
                        const parentNode = parent.previousElementSibling;
                        if (parentNode && parentNode.classList.contains('tree-node')) {
                            if (!parentNode.classList.contains('expanded')) {
                                parentNode.click();
                            }
                        }
                    }
                    parent = parent.parentElement;
                }
            } else {
                node.style.background = '';
            }
        }
    });
}

function expandAll() {
    const allNodes = document.querySelectorAll('.tree-node');
    allNodes.forEach(node => {
        if (!node.classList.contains('expanded')) {
            node.click();
        }
    });
}

function collapseAll() {
    const allNodes = document.querySelectorAll('.tree-node');
    allNodes.forEach(node => {
        if (node.classList.contains('expanded')) {
            node.click();
        }
    });
}

function showGlobalOnly() {
    document.getElementById('searchInput').value = '';
    searchTree();
    // å±•å¼€æ‰€æœ‰æ ¹èŠ‚ç‚¹
    const rootNodes = document.querySelectorAll('.tree > .tree-item > .tree-node');
    rootNodes.forEach(node => {
        if (!node.classList.contains('expanded')) {
            node.click();
        }
    });
}

function showFunctionsOnly() {
    document.getElementById('searchInput').value = 'function';
    searchTree();
}

function refresh() {
    renderTree();
}

function toggleExplorer() {
    const explorer = document.getElementById('object-explorer');
    explorer.style.display = explorer.style.display === 'none' ? 'block' : 'none';
}

function updateStats() {
    const totalNodes = document.querySelectorAll('.tree-item').length;
    document.getElementById('total-count').textContent = 
        `æ€»èŠ‚ç‚¹æ•°: ${totalNodes}`;
}

function showTooltip(event, path) {
    const tooltip = document.getElementById('tooltip');
    const parts = path.split('.');
    let obj = window;
    let description = '';
    
    // æŸ¥æ‰¾å¯¹è±¡æè¿°
    for (const rootObj of ROOT_OBJECTS) {
        if (rootObj.name === parts[0]) {
            description = rootObj.description;
            break;
        }
    }
    
    try {
        // å°è¯•è·å–å¯¹è±¡å€¼
        for (const part of parts) {
            if (obj && typeof obj === 'object' && part in obj) {
                obj = obj[part];
            } else {
                break;
            }
        }
        
        const type = getType(obj);
        const value = formatValue(obj, type);
        
        tooltip.innerHTML = `
            <strong>${path}</strong><br>
            <span style="color: ${getTypeColor(type)}">ç±»å‹: ${type}</span><br>
            ${description ? `æè¿°: ${description}<br>` : ''}
            å€¼: ${value}<br>
            æ„é€ å‡½æ•°: ${obj?.constructor?.name || 'N/A'}
        `;
        
        tooltip.style.left = (event.clientX + 15) + 'px';
        tooltip.style.top = (event.clientY + 15) + 'px';
        tooltip.style.display = 'block';
    } catch (error) {
        // å¿½ç•¥é”™è¯¯
    }
}

function hideTooltip() {
    const tooltip = document.getElementById('tooltip');
    tooltip.style.display = 'none';
}

function exportTree() {
    const treeData = ROOT_OBJECTS.map(rootObj => ({
        name: rootObj.name,
        type: getType(rootObj.obj),
        description: rootObj.description,
        properties: getChildren(rootObj.obj, rootObj.name).map(child => ({
            name: child.name,
            type: child.type,
            path: child.path,
            inherited: child.inherited
        }))
    }));
    
    const json = JSON.stringify(treeData, null, 2);
    navigator.clipboard.writeText(json).then(() => {
        alert('æ ‘ç»“æ„å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
    }).catch(err => {
        console.error('å¤åˆ¶å¤±è´¥:', err);
    });
}

// ========================= åˆå§‹åŒ– =========================
window.addEventListener('load', function() {
    console.log('åˆå§‹åŒ–JavaScriptå¯¹è±¡å±‚çº§æ¢æµ‹å™¨...');
    renderTree();
    
    // æ·»åŠ é”®ç›˜å¿«æ·é”®
    document.addEventListener('keydown', function(e) {
        if (e.ctrlKey && e.key === 'f') {
            e.preventDefault();
            document.getElementById('searchInput').focus();
        }
        if (e.key === 'Escape') {
            document.getElementById('searchInput').value = '';
            searchTree();
        }
    });
    
    // è‡ªåŠ¨å±•å¼€å…¨å±€å¯¹è±¡
    if (CONFIG.autoExpandGlobal) {
        setTimeout(() => {
            const rootNodes = document.querySelectorAll('.tree > .tree-item > .tree-node');
            rootNodes.forEach((node, index) => {
                if (index < 5) { // åªå±•å¼€å‰5ä¸ªï¼Œé¿å…æ€§èƒ½é—®é¢˜
                    setTimeout(() => node.click(), index * 100);
                }
            });
        }, 500);
    }
});

// ç‚¹å‡»å…¶ä»–åœ°æ–¹å…³é—­å·¥å…·æç¤º
document.addEventListener('click', function(e) {
    if (!e.target.closest('#tooltip') && !e.target.closest('.tree-node')) {
        hideTooltip();
    }
});
</script>
</body>
</html>
